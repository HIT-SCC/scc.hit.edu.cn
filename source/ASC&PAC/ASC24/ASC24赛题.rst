.. _header-n173:

ASC24赛题简介
=============

详细信息可阅读下方原版赛题要求

[官方英文原版赛题要求]：\ `ASC24 Preliminary Round
Notification.pdf <https://hit-scc.github.io/scc.hit.edu.cn/_pdf/ASC_PAC/ASC24_Preliminary_Round_Notification.pdf>`__

.. _header-n177:

赛题简要介绍：
--------------

初赛评分满分为100分，具体分数组成如下：

============== ============================ ====
部分           项目                         分值
============== ============================ ====
I.所在学校介绍 介绍所在大学在超算领域的活动 5分
II.团队介绍    参赛团队介绍                 5分
III.技术提案   设计HPC系统                  15分
III.技术提案   HPL&HPCG                     15分
III.技术提案   LLM推理优化                  30分
III.技术提案   OpenCAEPoro挑战              30分
============== ============================ ====

下面进行详细介绍：

.. _header-n209:

Part1.介绍所在大学在超算领域的活动：
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

可以从以下角度入手进行描述：

1. 超算相关的硬件与软件平台

2. 超算相关的课程，训练以及兴趣社团

3. 超算相关的研究与应用

4. 在超算领域取得成就的简要描述

.. _header-n220:

Part2.参赛团队介绍：
~~~~~~~~~~~~~~~~~~~~

可以从以下角度入手进行描述：

1. 简要描述团队的人员组成

2. 每个成员的照片与自我介绍，还需要一张团队的合照

3. 团队的口号或座右铭

.. _header-n229:

Part3.技术提案：
~~~~~~~~~~~~~~~~

.. _header-n230:

Part3.1 设计HPC系统：
^^^^^^^^^^^^^^^^^^^^^

**[任务简述]：**

按照要求列出硬件配置清单，提出一套构建 HPC
系统的方案。通过绘图等方式表示硬件之间连接的拓扑结构。

**[要求如下]：**

1. 整个系统功耗需要控制在\ ``3KW``\ 限制以下

2. 明确系统的软件与硬件配置以及内部联系。描述系统的能耗，评估性能并分析该方案的优点与缺点。

3. 官方提供了一个硬件清单如下(在初赛环节设计提案时不限定使用下面的硬件)

.. _header-n242:

Part3.2 HPC&HPCG:
^^^^^^^^^^^^^^^^^

**[任务简述]：**

这一部分作为基准测试，用于评估设备的性能。需要配置运行环境，并对源码进行编译。通过修改运行时的配置参数来尝试发掘出设备性能。

**[要求如下]：**

这一部分的提案需要描述下面内容：

-  软件环境

   -  操作系统

   -  编译器

   -  数学库

   -  MPI软件

   -  软件版本

-  性能优化与测试方法

-  性能测量

-  遇到的问题以及解决方法

**[PS: 深入地分析HPL与HPCG算法以及其各自的源码将会是一个加分项]**

官方推荐在\ ``x86 Xeon CPU`` 与 数据中心 GPU 平台上运行 HPL 与 HPCG
的验证与优化。如果使用的是其它的硬件，也欢迎提交相关的能充分阐述设备性能的分析与结果。

.. _header-n269:

Part3.3 LLM推理优化：
^^^^^^^^^^^^^^^^^^^^^

**[任务简述]：**

参赛团队需要对\ ``LLaMA2-70B``\ 大语言模型进行推理优化，目标是提高推理的\ ``吞吐速率``\ 。

**[要求如下]：**

这一部分的详细要求如下：

-  只能使用\ ``FP16``\ 与\ ``BF16``\ 两种精度进行推理，不允许使用量化手段(量化到8-bit，4-bit等)，否则该部分置0分

-  不允许在推理过程中对输出或输出的长度进行截断改变，否则该部分置0分

-  提交时需要有推理源码、日志文件、LLM
   优化的提案。内容不充分则该部分置0分

-  源码中控制 token 生成的参数不允许进行修改

-  建议结合设备硬件情况，从 baseline
   开始进行优化。(但也不明确反对使用较成熟的推理加速框架[如 TensorRT-LLM
   以及 vLLM ])

-  使用赛事官方提供的数据集

-  日志文件需要包含以下内容：

   -  模型运行的所有超参数

   -  每个迭代中必要的采样数据(如消耗的时间)

   -  整个过程的参数(吞吐速率，token总数，prompts的token总数，输出的tokens总数以及其余必要的参数)

.. _header-n296:

Part3.4 OpenCAEPoro挑战：
^^^^^^^^^^^^^^^^^^^^^^^^^

**[程序简介]：**

OpenCAEPoro是一个针对多相多组分渗流在多孔介质中的数值模拟器，特别关注石油储层问题。它使用C++构建，并融入MPI并行性以增强性能和可扩展性。

为了运行该应用程序，需要一些外部库。所有这些库以及OpenCAEPoro都可以通过我们的GitHub存储库（https://github.com/OpenCAEPlus/OpenCAEPoro_ASC2024）访问。确保您的系统已安装这些库，以确保OpenCAEPoro的顺利运行。完整的安装步骤可以在Readme.md中找到。

这个案例是为了进行三相（油、气、水）3D黑油模拟而设计的，它具有三层渗透结构，包含一个注入井和一个生产井。在顶层注入气体，而底层产出油。气体的注入导致油的膨胀，并使气体向生产井扫荡。油藏是封闭的，这意味着油藏和外部区域之间没有质量或热交换。案例1的尺寸为10000ft×10000ft×100ft，由80×80×40均匀网格划分。该案例将模拟3600天。

在OpenCAEPoro主目录下，可以找到测试案例，并使用以下命令运行：

.. code:: shell

   cd OpenCAEPoro/
   mpirun -np <core_num> ./testOpenCAEPoro ./data/case1.data verbose=1

**[优化目标]：**

该任务的目标是最小化“OBJECT
TIME”，该时间将在模拟完成后在屏幕上显示。要修改和优化的代码区域是：

1. OpenCAEPoro

2. 在petsc\ *solver中的PETSC*\ FIM_solver.cpp（第112至210行，已标记）

**[验证方式]：**

模拟完成后将生成SUMMARY.out文件。在特定时间点，将选择此文件中的某些项目进行结果验证。具体而言，选择的验证项目包括：

-  FPR：场均压力、

-  FOPR：场油产量速率

-  FGPR：场气体产量速率

-  FWPR：场水产量速率

-  WBHP-INJE1：INJE1底部压力

-  WBHP-PROD1：PROD1底部压力

这些变量将在设置的时间点T日进行验证：

50, 180, 360, 720, 1080, 1440, 1800, 2160, 2520, 2880, 3240, 3600

存在的SUMMARY_ref.out用于参考。例如，如果

.. math:: \frac{1}{|T|} \sum_{t \in T} \frac{|FPR(t) - FPR_{ref}(t)|}{FPR_{ref}(t)} < 0.01

其中|T|是T的大小，这里|T\| =
12，那么项目FPR通过了验证。只有当所有项目都满足上述公式时，才视为模拟结果正确。

**[要求如下]：**

-  不允许修改与方法参数相关的任何代码

-  不允许修改与输入相关的参数

-  保持目录结构和生成的文件不变

-  参与者必须提交结果压缩文件中所需的所有文件，否则此部分的得分将设为0

-  结果应通过验证测试，否则此部分的得分将设为0

-  参与者需要提供安装过程、机器规格以及使用的优化策略的详细信息，这将作为ASC24委员会评分的主要依据
